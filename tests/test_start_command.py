#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–∞–Ω–¥—ã /start
"""

import os
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

def test_video_file():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤–∏–¥–µ–æ —Ñ–∞–π–ª–∞"""
    print("üé¨ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–∞")
    print("=" * 50)
    
    video_path = "IMG_2560.MOV"
    
    if os.path.exists(video_path):
        print(f"‚úÖ –í–∏–¥–µ–æ —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω: {video_path}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
        file_size = os.path.getsize(video_path)
        print(f"üìä –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: {file_size / (1024*1024):.2f} MB")
        
        if file_size > 50 * 1024 * 1024:  # 50 MB
            print("‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –§–∞–π–ª –±–æ–ª—å—à–µ 50MB, –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Telegram")
        else:
            print("‚úÖ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Telegram")
        
        return True
    else:
        print(f"‚ùå –í–∏–¥–µ–æ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {video_path}")
        print("üìÅ –§–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:")
        
        for file in os.listdir("."):
            if file.lower().endswith(('.mov', '.mp4', '.avi', '.mkv')):
                print(f"   üé¨ {file}")
        
        return False

def test_start_message():
    """–¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è /start"""
    print("\nüìù –¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è /start")
    print("=" * 50)
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    test_username = "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
    
    welcome_text = f"""
–ú–µ–Ω—è –∑–æ–≤—É—Ç, –û–ª—å–≥–∞üå∏ –ò —è –ª—é–±–∏—Ç–µ–ª—å –∞—Å–∫–µ–∑, –¥–∞–Ω–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É —è –∏—Å–ø–æ–ª—å–∑—É—é —É–∂–µ —Ü–µ–ª—ã—Ö 4 –≥–æ–¥–∞üòç –¥–∞–∂–µ –ø—Ä–æ—à–ª–∞ –ø–æ –Ω–µ–π –æ–±—É—á–µ–Ω–∏–µ, —á—Ç–æ–± –∑–Ω–∞—Ç—å –≤—Å–µ –Ω—é–∞–Ω—Å—ã! –ò–∑ –≤—Å–µ—Ö —Å–æ—Ç–Ω–∏ –ø—Ä–∞–∫—Ç–∏–∫, –∫–æ—Ç–æ—Ä—ã–µ —è –∫–æ–≥–¥–∞ –ª–∏–±–æ –ø—Ä–æ–±–æ–≤–∞–ª–∞, –∞—Å–∫–µ–∑–∞ –º–æ—è —Å–∞–º–∞—è –ª—é–±–∏–º–∞—è!üíï

–í–æ-–ø–µ—Ä–≤—ã—Ö, —Ç—ã –ø–æ–ø—Ä–æ–±—É–µ—à—å, –∞ –∫–∞–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ –¥—Ä—É–≥–æ–º—É?!‚òÄÔ∏è

–í–æ-–≤—Ç–æ—Ä—ã—Ö, —Ç—ã –Ω–∞—á–Ω–µ—à—å –≤–µ—Ä–∏—Ç—å –≤ —á—É–¥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∂–µ–ª–∞–Ω–∏—è –º–æ–≥—É—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–∞–º—ã–º –≤–æ–ª—à–µ–±–Ω—ã–º –æ–±—Ä–∞–∑–æ–ºüí´

–í —Ç—Ä–µ—Ç—å–∏—Ö, —Ç–≤–æ—è –∂–∏–∑–Ω—å –Ω–µ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–µ–∂–Ω–µ–π!‚≠êÔ∏è

–Ø –∂–¥—É —Ç–µ–±—è, {test_username}!ü´Ç
    """
    
    print("üìã –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ /start:")
    print(welcome_text)
    
    print("\n‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ")
    return True

def test_handlers_import():
    """–¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ handlers"""
    print("\nüîß –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ handlers")
    print("=" * 50)
    
    try:
        from handlers import BotHandlers
        print("‚úÖ BotHandlers –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ start_command —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        handlers = BotHandlers()
        if hasattr(handlers, 'start_command'):
            print("‚úÖ –ú–µ—Ç–æ–¥ start_command –Ω–∞–π–¥–µ–Ω")
        else:
            print("‚ùå –ú–µ—Ç–æ–¥ start_command –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return False
        
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ handlers: {e}")
        return False

def print_instructions():
    """–ü–µ—á–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π"""
    print("\n" + "=" * 50)
    print("üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ù–ê–°–¢–†–û–ô–ö–ï")
    print("=" * 50)
    
    print("\n1Ô∏è‚É£ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏–¥–µ–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:")
    print("   üìÅ IMG_2560.MOV")
    
    print("\n2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ:")
    print("   ‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ 50MB")
    print("   ‚Ä¢ –§–æ—Ä–º–∞—Ç: MOV, MP4, AVI")
    
    print("\n3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:")
    print("   python run_simple_bot.py")
    print("   –∏–ª–∏")
    print("   python run_no_webhook.py")
    
    print("\n4Ô∏è‚É£ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /start:")
    print("   ‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start –±–æ—Ç—É")
    print("   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è")
    print("   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã /start")
    print("=" * 50)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∏–¥–µ–æ —Ñ–∞–π–ª
    video_ok = test_video_file()
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    message_ok = test_start_message()
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–º–ø–æ—Ä—Ç handlers
    handlers_ok = test_handlers_import()
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    print("\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
    print(f"   –í–∏–¥–µ–æ —Ñ–∞–π–ª: {'‚úÖ' if video_ok else '‚ùå'}")
    print(f"   –°–æ–æ–±—â–µ–Ω–∏–µ: {'‚úÖ' if message_ok else '‚ùå'}")
    print(f"   Handlers: {'‚úÖ' if handlers_ok else '‚ùå'}")
    
    if video_ok and message_ok and handlers_ok:
        print("\n‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!")
        print("–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º")
    else:
        print("\n‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã")
        print("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –≤—ã—à–µ")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    print_instructions()

if __name__ == "__main__":
    main()
