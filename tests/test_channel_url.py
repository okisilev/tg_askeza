#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª
"""

import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

def get_channel_url(channel_id):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª"""
    if not channel_id:
        return None
    
    if channel_id.startswith('@'):
        # –î–ª—è –∫–∞–Ω–∞–ª–æ–≤ —Å @username
        return f"https://t.me/{channel_id.replace('@', '')}"
    else:
        # –î–ª—è —á–∏—Å–ª–æ–≤—ã—Ö ID –∫–∞–Ω–∞–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, -1002806695160)
        # –£–±–∏—Ä–∞–µ–º -100 –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å
        if channel_id.startswith('-100'):
            channel_id_clean = channel_id[4:]
        else:
            channel_id_clean = channel_id
        return f"https://t.me/c/{channel_id_clean}"

def test_channel_urls():
    """–¢–µ—Å—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–∞–Ω–∞–ª—ã"""
    print("üîó –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–∞–Ω–∞–ª—ã")
    print("=" * 50)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã ID –∫–∞–Ω–∞–ª–æ–≤
    test_cases = [
        ("@test_channel", "–ö–∞–Ω–∞–ª —Å @username"),
        ("-1002806695160", "–ß–∏—Å–ª–æ–≤–æ–π ID –∫–∞–Ω–∞–ª–∞"),
        ("-1001234567890", "–î—Ä—É–≥–æ–π —á–∏—Å–ª–æ–≤–æ–π ID"),
        ("@askeza_channel", "–ö–∞–Ω–∞–ª –ê—Å–∫–µ–∑—ã —Å @username"),
    ]
    
    for channel_id, description in test_cases:
        url = get_channel_url(channel_id)
        print(f"\nüì∫ {description}:")
        print(f"   ID: {channel_id}")
        print(f"   URL: {url}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
    print(f"\nüîß –¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:")
    private_channel_id = os.getenv('PRIVATE_CHANNEL_ID')
    print(f"   PRIVATE_CHANNEL_ID: {private_channel_id}")
    
    if private_channel_id:
        current_url = get_channel_url(private_channel_id)
        print(f"   –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞: {current_url}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
        if private_channel_id.startswith('-100'):
            print(f"   ‚úÖ –ß–∏—Å–ª–æ–≤–æ–π ID –∫–∞–Ω–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ")
            print(f"   üìù –î–ª—è –∫–∞–Ω–∞–ª–∞ {private_channel_id} –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Å—Å—ã–ª–∫–∞: {current_url}")
        elif private_channel_id.startswith('@'):
            print(f"   ‚úÖ Username –∫–∞–Ω–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ")
        else:
            print(f"   ‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID –∫–∞–Ω–∞–ª–∞")
    else:
        print(f"   ‚ùå PRIVATE_CHANNEL_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω")

def print_instructions():
    """–ü–µ—á–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ"""
    print("\n" + "=" * 50)
    print("üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ù–ê–°–¢–†–û–ô–ö–ï –ö–ê–ù–ê–õ–ê")
    print("=" * 50)
    
    print("\n1Ô∏è‚É£ –î–ª—è –∫–∞–Ω–∞–ª–æ–≤ —Å @username:")
    print("   PRIVATE_CHANNEL_ID=@your_channel_name")
    print("   –°—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç: https://t.me/your_channel_name")
    
    print("\n2Ô∏è‚É£ –î–ª—è –∫–∞–Ω–∞–ª–æ–≤ —Å —á–∏—Å–ª–æ–≤—ã–º ID:")
    print("   PRIVATE_CHANNEL_ID=-1002806695160")
    print("   –°—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç: https://t.me/c/2806695160")
    
    print("\n3Ô∏è‚É£ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID –∫–∞–Ω–∞–ª–∞:")
    print("   ‚Ä¢ –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")
    print("   ‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª")
    print("   ‚Ä¢ –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://api.telegram.org/bot<BOT_TOKEN>/getUpdates")
    print("   ‚Ä¢ –ù–∞–π–¥–∏—Ç–µ 'chat':{'id':-1002806695160}")
    
    print("\n4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:")
    print("   ‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞")
    print("   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –Ω–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
    print("   ‚Ä¢ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–Ω–æ–ø–∫—É '–ó–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª'")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    print("ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–∞–Ω–∞–ª—ã")
    print("=" * 50)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫
    test_channel_urls()
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    print_instructions()
    
    print("\n‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!")
    print("–¢–µ–ø–µ—Ä—å –±–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª")

if __name__ == "__main__":
    main()
