# üí∞ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–≤—É–º –∫–Ω–æ–ø–∫–∞–º –æ–ø–ª–∞—Ç—ã

## ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

### **1. –î–≤–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã:**
- üå∏ **–ê—Å–∫–µ–∑–∞** - 990 —Ä—É–±–ª–µ–π
- üîÆ **–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è** - 2490 —Ä—É–±–ª–µ–π

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
# –¶–µ–Ω—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫
ASKEZA_PRICE: float = 990.0  # –¶–µ–Ω–∞ –±–∞–∑–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ "–ê—Å–∫–µ–∑–∞"
ASKEZA_NUMEROLOGY_PRICE: float = 2490.0  # –¶–µ–Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ "–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è"

ASKEZA_DESCRIPTION: str = "–ê—Å–∫–µ–∑–∞ - –¥–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É –Ω–∞ 30 –¥–Ω–µ–π"
ASKEZA_NUMEROLOGY_DESCRIPTION: str = "–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ 30 –¥–Ω–µ–π"
```

### **3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –º–µ–Ω—é:**
```
üå∏ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ê—Å–∫–µ–∑—É!

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ:

üå∏ **–ê—Å–∫–µ–∑–∞** - 990 —Ä—É–±–ª–µ–π
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É
‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚Ä¢ 30 –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏

üîÆ **–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è** - 2490 —Ä—É–±–ª–µ–π
‚Ä¢ –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ê—Å–∫–µ–∑—ã
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä
‚Ä¢ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
‚Ä¢ 30 –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏
```

### **4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ** `subscription_type` –≤ —Ç–∞–±–ª–∏—Ü—É `subscriptions`
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** —Ç–∏–ø–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ —Å—É–º–º–µ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

### **5. –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:**
- ‚úÖ `handle_subscribe_askeza_callback` - –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ "–ê—Å–∫–µ–∑–∞"
- ‚úÖ `handle_subscribe_numerology_callback` - –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ "–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è"
- ‚úÖ `create_payment` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞

## üîß **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**

### **1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.py`):**
```python
# –¶–µ–Ω—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫
ASKEZA_PRICE: float = 990.0
ASKEZA_NUMEROLOGY_PRICE: float = 2490.0

ASKEZA_DESCRIPTION: str = "–ê—Å–∫–µ–∑–∞ - –¥–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É –Ω–∞ 30 –¥–Ω–µ–π"
ASKEZA_NUMEROLOGY_DESCRIPTION: str = "–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ 30 –¥–Ω–µ–π"
```

### **2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`database.py`):**
```python
def create_subscription(self, user_id: int, payment_id: str, amount: float, subscription_type: str = "askeza"):
    """–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏"""
    with self.connection() as conn:
        expires_at = datetime.now() + timedelta(days=config.SUBSCRIPTION_DAYS)
        conn.execute(
            '''INSERT INTO subscriptions (user_id, payment_id, amount, status, expires_at, is_active, subscription_type) 
            VALUES (?, ?, ?, ?, ?, ?, ?)''',
            (user_id, payment_id, amount, 'active', expires_at, True, subscription_type)
        )
```

### **3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (`bot_fixed.py`):**
```python
async def handle_subscribe_askeza_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ê—Å–∫–µ–∑–∞"""
    await create_payment(update, context, "askeza", config.ASKEZA_PRICE, config.ASKEZA_DESCRIPTION)

async def handle_subscribe_numerology_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è"""
    await create_payment(update, context, "numerology", config.ASKEZA_NUMEROLOGY_PRICE, config.ASKEZA_NUMEROLOGY_DESCRIPTION)
```

### **4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ–¥–ø–∏—Å–∫–∏:**
```python
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ —Å—É–º–º–µ
amount = payment_info['amount']
if amount == config.ASKEZA_PRICE:
    subscription_type = "askeza"
    subscription_name = "–ê—Å–∫–µ–∑–∞"
elif amount == config.ASKEZA_NUMEROLOGY_PRICE:
    subscription_type = "numerology"
    subscription_name = "–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è"
else:
    subscription_type = "askeza"
    subscription_name = "–ê—Å–∫–µ–∑–∞"
```

## üöÄ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

### **1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
```bash
python main_fixed.py
```

### **2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
1. **–ù–∞–∂–º–∏—Ç–µ `/start`** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–≤–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã
2. **–í—ã–±–µ—Ä–∏—Ç–µ "–ê—Å–∫–µ–∑–∞"** - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è –ø–ª–∞—Ç–µ–∂ –Ω–∞ 990 —Ä—É–±–ª–µ–π
3. **–í—ã–±–µ—Ä–∏—Ç–µ "–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è"** - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è –ø–ª–∞—Ç–µ–∂ –Ω–∞ 2490 —Ä—É–±–ª–µ–π
4. **–û–ø–ª–∞—Ç–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ** - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º –ø–æ–¥–ø–∏—Å–∫–∏

### **3. –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
üîç [SUBSCRIBE] –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É askeza –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}
üîç [SUBSCRIBE] –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É numerology –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}
‚úÖ [CHECK] –ü–æ–¥–ø–∏—Å–∫–∞ –ê—Å–∫–µ–∑–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}
‚úÖ [CHECK] –ü–æ–¥–ø–∏—Å–∫–∞ –ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### ‚úÖ **–î–≤–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç!**

**–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å:**
- üå∏ **–ê—Å–∫–µ–∑–∞** - 990 —Ä—É–±–ª–µ–π (–±–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø)
- üîÆ **–ê—Å–∫–µ–∑–∞+–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è** - 2490 —Ä—É–±–ª–µ–π (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø)

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏** –ø–æ —Å—É–º–º–µ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ **–°–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–∏–ø–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø** –∫ –∫–∞–Ω–∞–ª—É –¥–ª—è –æ–±–µ–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

### **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
```bash
python main_fixed.py
```

### **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```bash
python bot_fixed.py
```

**–î–≤–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
